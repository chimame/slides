<section>

<h2>Rails勉強会 #1</h2>

<p>rito</p>

<p>2017/05/XX</p>

</section>
<section>

<h3>この会の目的</h3>
<hr>
<ul>
  <li>Railsの知識を少しでも深めて業務に役立てよう</li>
  <li>チームおよび職種の枠を超えた相談を気軽に行おう</li>
</ul>

<p>次回以降はリクエストがあればリクエスト内容をやります <img class="emoji" alt=":smile:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f604.png"></p>

</section>
<section>

<h3>今回の内容</h3>
<hr>
<p>テストってどうやって書くの？</p>

</section>
<section>

<h3>てことで実際にテストを書いていきましょう</h3>

</section>
<section>

<h3>まずは以下のリポジトリをcloneして下さい</h3>

<pre><code class="language-shell">$ git clone https://github.com/chimame/rails_training.git
</code></pre>

</section>
<section>

<h3>Bookモデルを作成してあります。</h3>
<p>軽くモデルの中身を説明します。</p>

</section>
<section>

<h3>テスト環境の構築</h3>

<pre><code class="language-shell">$ rails g rspec:install
</code></pre>
<p></p>

</section>
<section>

<h3>Bookモデルのfull_titleのテストを追加</h3>
<hr>
<p><code>spec/models/book_spec.rb</code>を作成</p>
<pre><code class="language-ruby">require 'rails_helper'

RSpec.describe Book, type: :model do
  describe '#full_title' do
    let(:book) { Book.new(title: title, sub_title: sub_title) }
    let(:title) { 'D・N・A2' }
    subject { book.full_title }

    context 'sub_titleがない場合' do
      let(:sub_title) { nil }
      it { is_expected.to eq 'D・N・A2 - ' }
    end
    
    context 'sub_titleがある場合' do
      let(:sub_title) { '何処かで失くしたあいつのアイツ' }
      example 'タイトルとサブタイトルが結合されること' do
        expect(book.full_title).to eq 'D・N・A2 - 何処かで失くしたあいつのアイツ'
      end
    end
  end
end
</code></pre>

</section>
<section>

<h3>テストを実行してみよう</h3>

<pre><code class="language-shell">bundle exec rspec
</code></pre>

</section>
<section>

<h3>次は自分でテストを作成してみましょう</h3>
<hr>
<p><code>calculate_loan_charge_from</code> メソッドの<br>
テストを作成してみて下さい <img class="emoji" alt=":pencil:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f4dd.png"></p>

<p>ちなみにわざとテストしにくいコードで書いています <img class="emoji" alt=":stuck_out_tongue_winking_eye:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f61c.png"></p>

</section>
<section>

<h3>本日はこれで終了です</h3>
<p><img class="emoji" alt=":clap:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f44f.png"> お疲れ様でした <img class="emoji" alt=":clap:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f44f.png"></p>

</section>
